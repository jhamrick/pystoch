

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Source Transformation &mdash; PyStoch v1.0 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="PyStoch v1.0 documentation" href="index.html" />
    <link rel="up" title="Source Documentation" href="module.html" />
    <link rel="next" title="Miscellaneous Utilities" href="utilities.html" />
    <link rel="prev" title="Inference Queries" href="queries.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="utilities.html" title="Miscellaneous Utilities"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="queries.html" title="Inference Queries"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">PyStoch v1.0 documentation</a> &raquo;</li>
          <li><a href="module.html" accesskey="U">Source Documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-pystoch.transform">
<span id="source-transformation"></span><h1>Source Transformation<a class="headerlink" href="#module-pystoch.transform" title="Permalink to this headline">¶</a></h1>
<div class="section" id="pystoch-transform">
<h2>pystoch.transform<a class="headerlink" href="#pystoch-transform" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="pystoch.transform.PyStochCompiler">
<em class="property">class </em><tt class="descclassname">pystoch.transform.</tt><tt class="descname">PyStochCompiler</tt><a class="headerlink" href="#pystoch.transform.PyStochCompiler" title="Permalink to this definition">¶</a></dt>
<dd><p>A visitor class to transform a python abstract syntax tree into
pystoch.</p>
<p>This class inherits from pystoch.codegen.SourceGenerator, which is
a NodeVisitor that transforms a python abstract syntax tree (AST)
into python code.  The PyStochCompiler takes it one step further,
overriding the appropriate functions from SourceGenerator in order
to insert PyStoch necessary code and perform PyStoch
transformations.</p>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><tt class="xref py py-obj docutils literal"><span class="pre">pystoch.codegen</span></tt>, <tt class="xref py py-obj docutils literal"><span class="pre">pystoch.ast</span></tt>, <tt class="xref py py-obj docutils literal"><span class="pre">_ast</span></tt>, <tt class="xref py py-obj docutils literal"><span class="pre">ast</span></tt></p>
</div>
<p class="rubric">Methods</p>
<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.body">
<tt class="descname">body</tt><big>(</big><em>statements</em>, <em>write_before=None</em>, <em>write_after=None</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.body" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the body statements.</p>
<p>This is the same as the SourceGenerator body function, with
the additional parameters of write_before and write_after.
These parameters allow you to insert extra stuff before and
after the rest of the statements.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>statements</strong> : list of ast.AST nodes</p>
<blockquote>
<div><p>The statements to be written in the body</p>
</div></blockquote>
<p><strong>write_before</strong> : list or string</p>
<blockquote>
<div><p>The statements to write before the body</p>
</div></blockquote>
<p><strong>write_after</strong> : list or string</p>
<blockquote class="last">
<div><p>The statements to write after the body</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.body_or_else">
<tt class="descname">body_or_else</tt><big>(</big><em>node</em>, <em>write_before=None</em>, <em>write_after=None</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.body_or_else" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a body as well as an else statement, if it exists.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>node</strong> : ast.AST</p>
<blockquote>
<div><p>node that has a body and optionally an orelse</p>
</div></blockquote>
<p><strong>write_before</strong> : list or string</p>
<blockquote>
<div><p>The statements to write before the body</p>
</div></blockquote>
<p><strong>write_after</strong> : list or string</p>
<blockquote class="last">
<div><p>The statements to write after the body</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><tt class="xref py py-obj docutils literal"><span class="pre">pystoch.compile.PyStochCompiler.body</span></tt></p>
</div>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.compile">
<tt class="descname">compile</tt><big>(</big><em>src</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.compile" title="Permalink to this definition">¶</a></dt>
<dd><p>Compile python source to pystoch source.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>src</strong> : string (default=None)</p>
<blockquote>
<div><p>If source is a valid path, it will load the source from
the path and compile that.  If it is not, then it will be
treated as the text of the source itself and be compiled.</p>
</div></blockquote>
</td>
</tr>
<tr class="field"><th class="field-name">Returns :</th><td class="field-body"><p class="first"><strong>out</strong> : string</p>
<blockquote class="last">
<div><p>The compiled source</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.contains_return">
<tt class="descname">contains_return</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.contains_return" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks whether or not a node (_ast.AST) contains any Return nodes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>node</strong> : _ast.AST</p>
<blockquote>
<div><p>The node to check for Return nodes</p>
</div></blockquote>
</td>
</tr>
<tr class="field"><th class="field-name">Returns :</th><td class="field-body"><p class="first"><strong>out</strong> : boolean</p>
<blockquote class="last">
<div><p>Whether or not the node contains any Return nodes</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.extract">
<tt class="descname">extract</tt><big>(</big><em>node</em>, <em>threshold=1</em>, <em>cthreshold=0</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract all Call/ListComp nodes above a certain threshold
from a node.  This repeatedly calls self._extract(node) until
self.should_rewrite(node, threshold=threshold) is False.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>node</strong> : _ast.AST</p>
<blockquote>
<div><p>The node to extract Call/ListComp nodes from.</p>
</div></blockquote>
<p><strong>threshold</strong> : int (default=1)</p>
<blockquote>
<div><p>The minimum number of Call/ListComp nodes that are allowed
before extraction will take place</p>
</div></blockquote>
<p><strong>cthreshold</strong> : int (default=0)</p>
<blockquote>
<div><p>The minimum number of ListComp nodes that are allowed
before extraction will take place.</p>
</div></blockquote>
</td>
</tr>
<tr class="field"><th class="field-name">Returns :</th><td class="field-body"><p class="first"><strong>out</strong> : _ast.AST</p>
<blockquote class="last">
<div><p>The modified <cite>node</cite>, minus Call/ListComp nodes.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.insert">
<tt class="descname">insert</tt><big>(</big><em>statements</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.insert" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert non-node statements into the source.</p>
<p>This is used for inserting non-node statements into the source
compilation.  These generally should only be PyStoch-specific
statements; if they are a statement that needs to be evaluated
by the PyStoch compiler then this function should NOT be used.</p>
<p>You can pass in either a list/tuple of statements, or a single
statement.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>statements</strong> : string or list or tuple</p>
<blockquote class="last">
<div><p>The statement or statements to be inserted</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.newline">
<tt class="descname">newline</tt><big>(</big><em>node=None</em>, <em>extra=0</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.newline" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert a newline.</p>
<p>This inserts a newline in the same way as SourceGenerator,
with the additional catch of incrementing the line stack if
the node asking for the newline is non-null (if it&#8217;s null,
then incrementing the line stack is pointless because nothing
will happen between now and the next time a newline occurs).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>node</strong> : ast.AST (default=None)</p>
<blockquote>
<div><p>The ast node to insert a newline for</p>
</div></blockquote>
<p><strong>extra</strong> : integer (default=0)</p>
<blockquote class="last">
<div><p>The number of extra newlines to insert</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>This function doesn&#8217;t actually immediately insert a newline,
it increments the number of newlines to insert and then
inserts them when write() is called.</p>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.should_rewrite">
<tt class="descname">should_rewrite</tt><big>(</big><em>node</em>, <em>threshold=1</em>, <em>cthreshold=0</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.should_rewrite" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks whether or not a node (_ast.AST) contains more than
the minimum number of Call nodes and ListComps (though
ListComps are only counted once, if they have more ListComps
inside them they will not be counted).  If so, this indicates
that the node should probably be rewritten.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>node</strong> : _ast.AST</p>
<blockquote>
<div><p>The node to check for Call/ListComp nodes</p>
</div></blockquote>
<p><strong>threshold</strong> : int (default=1)</p>
<blockquote>
<div><p>The default threshold for how many Call/ListComp nodes
should be allowed before the node should be rewritten</p>
</div></blockquote>
</td>
</tr>
<tr class="field"><th class="field-name">Returns :</th><td class="field-body"><p class="first"><strong>out</strong> : boolean</p>
<blockquote class="last">
<div><p>Whether or not the node contains any Call/ListComp nodes</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="pystoch.transform.PyStochCompiler.source">
<tt class="descname">source</tt><a class="headerlink" href="#pystoch.transform.PyStochCompiler.source" title="Permalink to this definition">¶</a></dt>
<dd><p>The source generated by the PyStochCompiler after <cite>compile</cite>
has been called.</p>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.to_assign">
<tt class="descname">to_assign</tt><big>(</big><em>value</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.to_assign" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a value, creates a random temporary identifier for
it, and creates an Assign node, assigning the value to the
identifier.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>value</strong> : ast.AST</p>
<blockquote>
<div><p>node that is to be the value of the Assign node</p>
</div></blockquote>
</td>
</tr>
<tr class="field"><th class="field-name">Returns :</th><td class="field-body"><p class="first"><strong>out</strong> : tuple of string, _ast.Assign</p>
<blockquote class="last">
<div><p>the string is the identifier of the node, and the
_ast.Assign is the node that was created</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_Assert">
<tt class="descname">visit_Assert</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_Assert" title="Permalink to this definition">¶</a></dt>
<dd><p>The Assert statement visitor function.</p>
<p>This function is not implemented in codegen.  It prints the
assert statement as normal, additionally rewriting the test
case and/or the message if they contain Call nodes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>node</strong> : _ast.Assert</p>
<blockquote class="last">
<div><p>The Assert node to transform into source code</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_Assign">
<tt class="descname">visit_Assign</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_Assign" title="Permalink to this definition">¶</a></dt>
<dd><p>Rewrite the Assign visitor function to deal with list
comprehensions and function calls.</p>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_Attribute">
<tt class="descname">visit_Attribute</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_Attribute" title="Permalink to this definition">¶</a></dt>
<dd><p>Rewrite the Attribute visitor function to deal with extraction.</p>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_AugAssign">
<tt class="descname">visit_AugAssign</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_AugAssign" title="Permalink to this definition">¶</a></dt>
<dd><p>Rewrite the AugAssign visitor function to deal with list
comprehensions and function calls.</p>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_BinOp">
<tt class="descname">visit_BinOp</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_BinOp" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls the superclass&#8217; visit_BinOp method.</p>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><tt class="xref py py-obj docutils literal"><span class="pre">codegen.SourceCompiler</span></tt></p>
</div>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_BoolOp">
<tt class="descname">visit_BoolOp</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_BoolOp" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls the superclass&#8217; visit_BoolOp method.</p>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><tt class="xref py py-obj docutils literal"><span class="pre">codegen.SourceCompiler</span></tt></p>
</div>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_Call">
<tt class="descname">visit_Call</tt><big>(</big><em>node</em>, <em>newline=False</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_Call" title="Permalink to this definition">¶</a></dt>
<dd><p>Rewrite the Call visitor function to extract any child Call
nodes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>node</strong> : _ast.Call</p>
<blockquote>
<div><p>The Call node to rewrite.</p>
</div></blockquote>
<p><strong>newline</strong> : boolean (default=False)</p>
<blockquote class="last">
<div><p>Whether or not to insert a newline before transforming the
Call node to source.  This should be set to True when, for
example, the Call node is by itself on a line.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_ClassDef">
<tt class="descname">visit_ClassDef</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_ClassDef" title="Permalink to this definition">¶</a></dt>
<dd><p>Rewrite the ClassDef visitor to push new values onto the
class and line stacks at the beginning of the stack, and then
to pop those values at the end of the class.</p>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_Compare">
<tt class="descname">visit_Compare</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_Compare" title="Permalink to this definition">¶</a></dt>
<dd><p>Rewrite the Compare visitor function to deal with extraction.</p>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_Delete">
<tt class="descname">visit_Delete</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_Delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls the superclass&#8217; visit_Delete method, while
additionally checking to make sure that no Call nodes are
present in the node being visited.</p>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><tt class="xref py py-obj docutils literal"><span class="pre">codegen.SourceCompiler</span></tt></p>
</div>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_Dict">
<tt class="descname">visit_Dict</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_Dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Rewrite the Dict visitor function to extract any list
comprehensions or calls out of the keys or values.</p>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_DictComp">
<tt class="descname">visit_DictComp</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_DictComp" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary comprehensions are not supported at this time.</p>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_ExceptHandler">
<tt class="descname">visit_ExceptHandler</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_ExceptHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>The superclass&#8217; visit_ExceptHandler method is called.</p>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><tt class="xref py py-obj docutils literal"><span class="pre">codegen.SourceCompiler</span></tt></p>
</div>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_Exec">
<tt class="descname">visit_Exec</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_Exec" title="Permalink to this definition">¶</a></dt>
<dd><p>Exec statements are not supported at this time.</p>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_Expr">
<tt class="descname">visit_Expr</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_Expr" title="Permalink to this definition">¶</a></dt>
<dd><p>Rewrite the Expr visitor function to deal with Call nodes
that are on a single line by themselves.  These must be
handled specially, because we want to make sure that the first
Call node remains on a line by itself, e.g.:</p>
<p>PYSTOCH_AAAAAAAA = bar()
foo(PYSTOCH_AAAAAAAA)</p>
<p>And not:</p>
<p>PYSTOCH_AAAAAAAA = bar()
PYSTOCH_BBBBBBBB = foo(PYSTOCH_AAAAAAAA)
PYSTOCH_BBBBBBBB</p>
<p>If it is not a call function, then it extracts the node&#8217;s
value as per usual and then calls the super visit_Expr on the
new node.</p>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_For">
<tt class="descname">visit_For</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_For" title="Permalink to this definition">¶</a></dt>
<dd><p>Rewrite the For visitor function to first store the
iterator of the for loop in a temporary variable, and then to
loop over the contents of that variable.  Additionally, push a
new value onto the loop stack before entering the for loop,
increment that value after each pass of the loop, and pop the
value after the loop has terminated.</p>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_FunctionDef">
<tt class="descname">visit_FunctionDef</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_FunctionDef" title="Permalink to this definition">¶</a></dt>
<dd><p>Rewrite the FunctionDef visitor to push a new value onto
the function and line stacks at the beginning of the function,
and then pop those values at the end of the function.</p>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_GeneratorExp">
<tt class="descname">visit_GeneratorExp</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_GeneratorExp" title="Permalink to this definition">¶</a></dt>
<dd><p>Rewrite the GeneratorExp visitor function to turn the
generator expression into a iterator function.  This is
necessary to be able to correctly label any random functions
that get called from within the generator expression.
Basically, this function creates a function, and transforms
the generator into a for loop that yields values from the.
The function name is then returned, so that the parent node
can handle the assignment properly.</p>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_If">
<tt class="descname">visit_If</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_If" title="Permalink to this definition">¶</a></dt>
<dd><p>Rewrite the If visitor function to assign the if and elif
tests to temporary variables, and then check these variables
in the actual if and elif statements.</p>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_IfExp">
<tt class="descname">visit_IfExp</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_IfExp" title="Permalink to this definition">¶</a></dt>
<dd><p>IfExps are not supported at this time.</p>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_Import">
<tt class="descname">visit_Import</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_Import" title="Permalink to this definition">¶</a></dt>
<dd><p>Visit an import node (not calling superclass because it is
wrong)</p>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_ImportFrom">
<tt class="descname">visit_ImportFrom</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_ImportFrom" title="Permalink to this definition">¶</a></dt>
<dd><p>The superclass&#8217; visit_ImportFrom method is called.</p>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><tt class="xref py py-obj docutils literal"><span class="pre">codegen.SourceCompiler</span></tt></p>
</div>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_Index">
<tt class="descname">visit_Index</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_Index" title="Permalink to this definition">¶</a></dt>
<dd><p>Rewrite the Index visitor function to deal with extraction.</p>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_Lambda">
<tt class="descname">visit_Lambda</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_Lambda" title="Permalink to this definition">¶</a></dt>
<dd><p>Rewrite the Lambda visitor function to transform the lambda
into a real iterator function.</p>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_List">
<tt class="descname">visit_List</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_List" title="Permalink to this definition">¶</a></dt>
<dd><p>Rewrite the List visitor function to extract any list
comprehensions or calls out of the keys or values.</p>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_ListComp">
<tt class="descname">visit_ListComp</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_ListComp" title="Permalink to this definition">¶</a></dt>
<dd><p>Rewrite the ListComp visitor function to turn the list
comprehension into a real for loop.  This is necessary to be
able to correctly label any random functions that get called
from within the list comprehension.  Basically, this function
creates a temporary variable for the list, and transforms the
comprehension into a for loop that appends values onto this
list.  The list name is then returned, so that whatever
element called the for loop can handle the assignment
properly.</p>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_Pass">
<tt class="descname">visit_Pass</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_Pass" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls the superclass&#8217; visit_Pass method.</p>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><tt class="xref py py-obj docutils literal"><span class="pre">codegen.SourceCompiler</span></tt></p>
</div>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_Print">
<tt class="descname">visit_Print</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_Print" title="Permalink to this definition">¶</a></dt>
<dd><p>Rewrite the Print visitor function to deal with possible
Call nodes.  Any children with Call nodes are stored in
temporary variables, and then the temporary variable is used
in the actual print statement.</p>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><tt class="xref py py-obj docutils literal"><span class="pre">codegen.SourceCompiler</span></tt></p>
</div>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_Raise">
<tt class="descname">visit_Raise</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_Raise" title="Permalink to this definition">¶</a></dt>
<dd><p>Rewrite the Raise visitor function to deal with potential
Call nodes.  Any children with Call nodes are stored in
temporary variables, and then the variable is used in the
actual raise statement.</p>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><tt class="xref py py-obj docutils literal"><span class="pre">codegen.SourceCompiler</span></tt></p>
</div>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_Return">
<tt class="descname">visit_Return</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_Return" title="Permalink to this definition">¶</a></dt>
<dd><p>Rewrite the Return visitor function to first store the
return value of the function, then pop the line and function
stacks, then return the stored value.</p>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_Set">
<tt class="descname">visit_Set</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_Set" title="Permalink to this definition">¶</a></dt>
<dd><p>Set nodes are not supported at this time.</p>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_SetComp">
<tt class="descname">visit_SetComp</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_SetComp" title="Permalink to this definition">¶</a></dt>
<dd><p>Set comprehensions are not supported at this time.</p>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_Slice">
<tt class="descname">visit_Slice</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_Slice" title="Permalink to this definition">¶</a></dt>
<dd><p>Rewrite the Slice visitor function to deal with extraction.</p>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_Subscript">
<tt class="descname">visit_Subscript</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_Subscript" title="Permalink to this definition">¶</a></dt>
<dd><p>Rewrite the Subscript visitor function to deal with extraction.</p>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_TryExcept">
<tt class="descname">visit_TryExcept</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_TryExcept" title="Permalink to this definition">¶</a></dt>
<dd><p>The superclass&#8217; visit_TryExcept method is called.</p>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><tt class="xref py py-obj docutils literal"><span class="pre">codegen.SourceCompiler</span></tt></p>
</div>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_TryFinally">
<tt class="descname">visit_TryFinally</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_TryFinally" title="Permalink to this definition">¶</a></dt>
<dd><p>The superclass&#8217; visit_TryFinally method is called.</p>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><tt class="xref py py-obj docutils literal"><span class="pre">codegen.SourceCompiler</span></tt></p>
</div>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_Tuple">
<tt class="descname">visit_Tuple</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_Tuple" title="Permalink to this definition">¶</a></dt>
<dd><p>Rewrite the Tuple visitor function to extract any list
comprehensions or calls out of the keys or values.</p>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_UnaryOp">
<tt class="descname">visit_UnaryOp</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_UnaryOp" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls the superclass&#8217; visit_UnaryOp method.</p>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><tt class="xref py py-obj docutils literal"><span class="pre">codegen.SourceCompiler</span></tt></p>
</div>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_While">
<tt class="descname">visit_While</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_While" title="Permalink to this definition">¶</a></dt>
<dd><p>Rewrite the While visitor function to first store the test
of the while loop in a temporary variable, and then to loop
over the contents of that variable.  Additionally, push a new
value onto the loop stack before entering the while loop,
increment that value after each pass of the loop, and pop the
value after the loop has terminated.</p>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_With">
<tt class="descname">visit_With</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_With" title="Permalink to this definition">¶</a></dt>
<dd><p>With statements are not supported at this time.</p>
</dd></dl>

<dl class="method">
<dt id="pystoch.transform.PyStochCompiler.visit_Yield">
<tt class="descname">visit_Yield</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#pystoch.transform.PyStochCompiler.visit_Yield" title="Permalink to this definition">¶</a></dt>
<dd><p>Rewrite the Yield visitor function to extract calls/list
comprehensions, and additionally pop the line and function
stacks before yielding, and then pushing them with the same
values after returning from the yield.</p>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Source Transformation</a><ul>
<li><a class="reference internal" href="#pystoch-transform">pystoch.transform</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="queries.html"
                        title="previous chapter">Inference Queries</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="utilities.html"
                        title="next chapter">Miscellaneous Utilities</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/transform.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="utilities.html" title="Miscellaneous Utilities"
             >next</a> |</li>
        <li class="right" >
          <a href="queries.html" title="Inference Queries"
             >previous</a> |</li>
        <li><a href="index.html">PyStoch v1.0 documentation</a> &raquo;</li>
          <li><a href="module.html" >Source Documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Jessica Hamrick.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>